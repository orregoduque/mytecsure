{% extends "base.html" %}
{% load bootstrap3 %}

<head>

    <script src="js/jquery-1.11.0.min.js"></script> 
    <script src="js/bootstrap.min.js"></script>
    <script src="js/wow.min.js"></script>
</head>


{% block content %}
<div class="container-fluid">
    <div class="col-xs-12 col-xs-offset-0 col-sm-offset-1 col-sm-4 col-md-offset-2 col-md-4 col-lg-4 col-lg-offset-3">
        <form type="get" action="." style="margin: 0">
            <!-- <input  id="search_box" onkeyup="search_animal()" type="text" name="search_box"  placeholder="Nombre Estudiante" >-->
            <select id="search_box" name="search_box" class="form-control" > 
                <option value="" disabled selected>Seleccionar estudiante</option>
                <option value = "HEIDY TATIANA VALENCIA PERLAZA" >HEIDY TATIANA VALENCIA PERLAZA</option>
                <option value = "LISETH YULIANA ZUÑIGA SINISTERRA" >LISETH YULIANA ZUÑIGA SINISTERRA</option>
             </select>
             <button id="search_submit" type="submit" class="btn btn-primary pull-center">Buscar</button>
        </form>
    </div>

    <!--
    <div class="col-xs-12 col-xs-offset-0 col-sm-offset-1 col-sm-4 col-md-offset-2 col-md-4 col-lg-4 col-lg-offset-3"> 
            <ol id='list'>
                <li class="animals">NICOLE AGUJA OCAMPO</li>
                <li class="animals">SARAY BASTO BEJARANO</li>
                <li class="animals">LISETH YULIANA ZUÑIGA SINISTERRA</li>
            </ol>
           
    </div>
    -->
    

    
    <!--
    <body>
        <h1>Search/filterText Dropdown Example</h1>
        <div class="dropdown">
        <button class="dropbtn" onclick="showDropList()">Dropdown</button>
        <div id="myDropdown" class="dropdownList">
        <input type="text" placeholder="Search.." class="searchField">
        <a href="#">Cow</a>
        <a href="#">Cat</a>
        <a href="#">Dog</a>
        <a href="#">Giraffe</a>
        <a href="#">Lion</a>
        <a href="#">Leopard</a>
        <a href="#">Cheetah</a>
        </div>
        </div>
        <script>
           function showDropList(){
              let dropDiv = document.querySelector('.dropdownList');
              if(dropDiv.style.display==="block"){
                 dropDiv.style.display = "";
              } else {
                 dropDiv.style.display = "block";
              }
           }
           document.querySelector('.searchField').addEventListener('keyup',filterDropdown);
           function filterDropdown() {
              var inputSearch, filterText, ul, li, links, i,div;
              inputSearch = document.querySelector(".searchField");
              filterText = inputSearch.value.toUpperCase();
              div = document.getElementById("myDropdown");
              links = div.getElementsByTagName("a");
              for (i = 0; i < links.length; i++) {
                 txtValue = links[i].textContent || links[i].innerText;
                 if (txtValue.toUpperCase().indexOf(filterText) > -1) {
                    links[i].style.display = "";
                 } else {
                 links[i].style.display = "none";
                 }
              }
           }
        </script>
        </body>
    -->    
</div>


    {% if usuario.name != "valentina hurtado" %}
    <div class="col-xs-12 col-xs-offset-0 col-sm-offset-1 col-sm-4 col-md-offset-2 col-md-4 col-lg-4 col-lg-offset-3">
        <p>
            <br>
            <b>Nombre:</b>
            {{ usuario.nombre_estudiante}} 

            {% if usuario.nombre_2_estudiante != "None" %}
            {{ usuario.nombre_2_estudiante}} 
            {% endif %}

            {{ usuario.apellido_estudiante}} 
            {{ usuario.apellido_2_estudiante}}
            <br>
            <b>Fecha de nacimiento:</b>
            {{ usuario.cumpleanos_estudiante}}
            <br>
            <b>Grado:</b> {{ usuario.grado_estudiante}} - <b>Seccion:</b> {{ usuario.seccion_estudiante}}
            <br>
            <b>Tipo de sangre:</b>
            {{ usuario.blood_group}}
            <br>
            <b>Condiciones Especiales:</b>
            {{ usuario.descripcion_condicion_especial}}
            <br>
            <b>Acudiente:</b>
            {{ usuario.nombre_acudiente}} {{ usuario.apellido_acudiente}}
            <br>
            <b>Parentesco:</b>
            {{ usuario.parentesco_acudiente}}
            <br>
        </p>
    </div>


    <div class="col-xs-12 col-xs-offset-0 col-sm-offset-1 col-sm-4 col-md-offset-2 col-md-4 col-lg-4 col-lg-offset-3">
        <img src={{imagen}} alt="Photo">
    </div>

    <div  id='coordenada' class="col-xs-12 col-xs-offset-0 col-sm-offset-1 col-sm-4 col-md-offset-2 col-md-4 col-lg-4 col-lg-offset-3">
        <p>

        </p>
        <script>
            var a = "{{coordenadas}}";
            document.getElementById("coordenada").innerHTML = a;
        </script>
    </div>
    <!--
    <div class="col-xs-12 col-xs-offset-0 col-sm-offset-1 col-sm-4 col-md-offset-2 col-md-4 col-lg-4 col-lg-offset-3">
        <script>
            
            let btn = document.createElement("button");
            btn.innerHTML = "Save";
            btn.addEventListener("click", function () {
            alert("Button is clicked");
            });
            document.body.appendChild(btn);
            
        </script>
    </div>
    -->
    
    <div class="col-xs-12 col-xs-offset-0 col-sm-offset-1 col-sm-4 col-md-offset-2 col-md-4 col-lg-4 col-lg-offset-3">
        <p>
            <br>
            <b>Convenio:</b> {{usuario.identidad_seguro}}
            <br>
            <b>ID estudiante:</b> {{usuario.nit_estudiante}}
            <br>
        </p>
    </div>
    <div class="col-xs-12 col-xs-offset-0 col-sm-offset-1 col-sm-4 col-md-offset-2 col-md-4 col-lg-4 col-lg-offset-3">
        <!--
        <form type="acudiente_get" action="." style="margin: 0">
            <a href="tel:{{ usuario.celular_acudiente}} ">Llamar acudiente</a>
            <a href="tel:{{ usuario.celular_acudiente}} ">{{ usuario.celular_acudiente}} </a>
        </form>
        -->
        <button onclick="location.href='tel:{{ usuario.celular_acudiente}}'" type="button" class="btn btn-primary pull-center">
            Llamar acudiente
        </button>
    </div>

    <div class="col-xs-12 col-xs-offset-0 col-sm-offset-1 col-sm-4 col-md-offset-2 col-md-4 col-lg-4 col-lg-offset-3">
        <br>
    </div>
    
    <div class="col-xs-12 col-xs-offset-0 col-sm-offset-1 col-sm-4 col-md-offset-2 col-md-4 col-lg-4 col-lg-offset-3">
        <!--
        <form type="get" action="." style="margin: 0">
            <a href="tel:{{ ambulancia_name}}  ">Llamar ambulancia</a>
            <a href="tel:{{ ambulancia_name}}  ">{{ ambulancia_name}}  </a>
        </form>
        -->
        <button onclick="location.href='tel:{{ ambulancia_name}}'" type="button" class="btn btn-primary pull-center">
            Llamar ambulancia
        </button>
    </div>

            


    <div class="col-xs-12 col-xs-offset-0 col-sm-offset-1 col-sm-4 col-md-offset-2 col-md-4 col-lg-4 col-lg-offset-3">
        <p>
            <br>
            <b>Puntos de atencion:</b>  {{puntos_atencion}}
        </p>
    </div>
    <div class="col-xs-12 col-xs-offset-0 col-sm-offset-1 col-sm-4 col-md-offset-2 col-md-4 col-lg-4 col-lg-offset-3">
        <img src={{mapa_cali}} alt="Photo">
    </div>
    

    <div class="col-xs-12 col-xs-offset-0 col-sm-offset-1 col-sm-4 col-md-offset-2 col-md-4 col-lg-4 col-lg-offset-3">
            <button id = "find-me" class="btn btn-primary pull-center">Obtener Ubicacion</button>
            <br>
            <p id = "status"></p>
            <a id = "map-link" target="_blank"></a>
            <p id = "punto"></p>
            <p id = "lugar"></p>
    </div>

    {% endif %}

    <!--
    <body>
        <h1>GeeksforGeeks</h1>
        <ul id="myList"></ul>
        <script>
          let data = ["Ram", "Shyam", "Sita", "Gita"];
          let x = ['R','S','a', 't'];
      
          let list = document.getElementById("myList");
      
          
          data.forEach((item) => {
              if (item.includes(x[1]))
              {
                    let li = document.createElement("li");
                    li.innerText = item;
                    list.appendChild(li);
              }
          });
        </script>
      </body>
      -->

</div>

<div>
    <script>
        function geoFindMe() 
        {
            const status = document.querySelector('#status');
            const mapLink = document.querySelector('#map-link');

            const punto = document.querySelector('#punto');//
            const lugar = document.querySelector('#lugar');//

            mapLink.href = '';
            mapLink.textContent = '';

            function success(position) 
            {
                const latitude  = position.coords.latitude;
                const longitude = position.coords.longitude;
                const lat = '{{coordenadas}}' ;
                //const long = '{{coordenadas}}' ;

                let x = Math.pow(4, 3);// 4 elevado a la 3

                const distancia = x;
                status.textContent = '';
                punto.textContent = '{{coordenadas}}';//
                lugar.textContent = distancia;//
                
                mapLink.href = `https://www.google.com/maps?q=${latitude},${longitude}`;
                        //mapLink.textContent = `Haz click aqui para buscar ubicacion de: Latitud ${latitude} °, Longitud ${longitude} °`;
                mapLink.textContent = `Calcular recorrido`;
            }
            
            function error() {
                status.textContent = 'Unable to retrieve your location';
            }

            if(!navigator.geolocation) {
                status.textContent = 'Geolocation is not supported by your browser';
            } else {
                status.textContent = 'Locating…';
                navigator.geolocation.getCurrentPosition(success, error);
            }

        }

        function pay()
        {
            alert('hola');
        }

        document.querySelector('#find-me').addEventListener('click', geoFindMe);

        //document.querySelector('#search_submit').addEventListener('click',geoFindMe);

        /*
        function search_animal() 
        {
            
            let input = document.getElementById('search_box').value
            input=input.toLowerCase();
            
            let x = document.getElementsByClassName('animals');

            if (input.length >= 1)
            {
                for (i = 0; i < x.length; i++) { 
                    if (!x[i].innerHTML.toLowerCase().includes(input)) {
                        x[i].style.display="none";
                    }
                    else {
                        x[i].style.display="list-item";                 
                    }
                }
            }
            else
            {
                for (i = 0; i < x.length; i++) { 
                        x[i].style.display="none";
                    
                }
            }
        }
        */


        /*
        function changeColor(id) 
        {
        var listitem = document.getElementById(id);
        listitem.style.backgroundColor = "red";
        }
        */

        
                

    </script>


</div>
{% endblock %}